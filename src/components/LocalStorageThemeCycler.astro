---
import { SITE_LIB_URL } from '../SETTINGS.mjs';
const properties = Astro.props;
properties.storageKey = properties['storage-key'];
const { global = 'cycleColorSchemes', storageKey="", schemes=[]} = properties;
const cycleScript = `
<script type="module">
  import localstorageCycler from "${SITE_LIB_URL}js/localstorage-cycler/0.0.0/index.mjs";
  const key = '${storageKey}';
  const values = [${schemes.map((x)=>`"${x}"`).join(",")}];
  const emit = ({value, key, index}) => {
    globalThis.document.body.classList.remove(...values.filter(s=>s));
    if(value){
      globalThis.document.body.classList.add(value);
    }
    return {value, key, index};
  }
  window["${global}"] = localstorageCycler(key, emit, ...values);
</script>
`
---
{cycleScript}